{"ast":null,"code":"import _defineProperty from \"/Users/stevehash/Documents/GitHub/atx_health_scores/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/stevehash/Documents/GitHub/atx_health_scores/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/stevehash/Documents/GitHub/atx_health_scores/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/stevehash/Documents/GitHub/atx_health_scores/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/stevehash/Documents/GitHub/atx_health_scores/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/stevehash/Documents/GitHub/atx_health_scores/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/stevehash/Documents/GitHub/atx_health_scores/client/src/pages/User.js\";\nimport React, { Component } from \"react\"; // import { Link } from \"react-router-dom\";\n\nimport { Jumbotron, Input, Nav, Button, Form, FormGroup, Label, Container, Row, Col, Table } from 'reactstrap';\nimport API from \"../utils/API\"; // import BootstrapTable from 'react-bootstrap-table-next';\n// import { Input} from \"../components/Form\";\n// var $  = require( 'jquery' );\n// var dt = require( 'datatables.net' )();\n\nimport { GoogleLogin } from 'react-google-login';\n\nvar User =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(User, _Component);\n\n  function User() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, User);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(User)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      restaurantName: \"\",\n      date: \"\",\n      results: [],\n      user: []\n    };\n\n    _this.searchATX = function () {\n      API.search().then(function (res) {\n        return _this.setState({\n          results: res.data\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.searchATXName = function (query) {\n      API.searchName(query).then(function (res) {\n        return _this.setState({\n          results: res.data\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.searchATXDate = function (query) {\n      API.searchDate(query).then(function (res) {\n        return _this.setState({\n          results: res.data\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.handleInputChange = function (event) {\n      var name = event.target.name;\n      var value = event.target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleFormSubmit = function (event) {\n      event.preventDefault();\n      console.log(_this.state.restaurantName);\n\n      if (_this.state.restaurantName === \"\") {\n        _this.searchATXDate(_this.state.date);\n      } else {\n        _this.searchATXName(_this.state.restaurantName);\n      }\n    };\n\n    _this.mapResults = function () {\n      _this.state.results.map(function (food) {\n        return {\n          name: food.restaurant_name\n        };\n      });\n    };\n\n    _this.responseGoogle = function (response) {\n      console.log();\n\n      _this.setState({\n        user: response.profileObj\n      });\n\n      API.getUser(response.profileObj.email).then(function (res) {\n        console.log(JSON.stringify(res));\n\n        _this.setState({\n          user: res.data\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n      console.log(_this.state.user);\n\n      if (!_this.state.user) {\n        console.log(\"user doesn't exits.... creating user\");\n        API.createUser({\n          email: response.profileObj.email,\n          name: response.profileObj.name,\n          imageURL: response.profileObj.imageURL\n        }).then(function (res) {\n          _this.setState({\n            user: res.data\n          });\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(User, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.searchATX();\n      API.getUser(localStorage.getItem('email')).then(function (res) {\n        _this2.setState({\n          user: res.data\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n      console.log(this.state.user);\n    }\n  }, {\n    key: \"render\",\n    // onSignIn = (googleUser) => {\n    //     var profile = googleUser.getBasicProfile();\n    //     console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.\n    //     console.log('Name: ' + profile.getName());\n    //     console.log('Image URL: ' + profile.getImageUrl());\n    //     console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.\n    //   }\n    value: function render() {\n      return React.createElement(Container, {\n        fluid: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(Nav, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"\\xA0\"), this.state.user.email ? React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(Col, {\n        size: \"md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Jumbotron, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Welcome \", this.state.user.name), React.createElement(Button, {\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Saved Places\")))) : React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(Col, {\n        size: \"md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(Jumbotron, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Please Login...\"), React.createElement(GoogleLogin, {\n        clientId: \"115882627637-6sn830rkgb9mlt6tih8pbapfbmhuggu3.apps.googleusercontent.com\",\n        buttonText: \"Login\",\n        onSuccess: this.responseGoogle,\n        onFailure: this.responseGoogle,\n        cookiePolicy: 'single_host_origin',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return User;\n}(Component);\n\nexport default User;","map":{"version":3,"sources":["/Users/stevehash/Documents/GitHub/atx_health_scores/client/src/pages/User.js"],"names":["React","Component","Jumbotron","Input","Nav","Button","Form","FormGroup","Label","Container","Row","Col","Table","API","GoogleLogin","User","state","restaurantName","date","results","user","searchATX","search","then","res","setState","data","catch","err","console","log","searchATXName","query","searchName","searchATXDate","searchDate","handleInputChange","event","name","target","value","handleFormSubmit","preventDefault","mapResults","map","food","restaurant_name","responseGoogle","response","profileObj","getUser","email","JSON","stringify","createUser","imageURL","localStorage","getItem"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n// import { Link } from \"react-router-dom\";\nimport { Jumbotron, Input, Nav, Button, Form, FormGroup, Label, Container, Row, Col, Table} from 'reactstrap';\nimport API from \"../utils/API\";\n// import BootstrapTable from 'react-bootstrap-table-next';\n// import { Input} from \"../components/Form\";\n// var $  = require( 'jquery' );\n// var dt = require( 'datatables.net' )();\nimport { GoogleLogin } from 'react-google-login';\n\nclass User extends Component {\n    state = {\n      restaurantName: \"\",\n      date: \"\",\n      results: [],\n      user: []\n    };\n  \n    componentDidMount() {\n      this.searchATX();\n      API.getUser(localStorage.getItem('email')).then(res => {\n        this.setState({user: res.data})\n      }).catch(err =>console.log(err));\n      console.log(this.state.user);\n      \n    }\n  \n    searchATX = () => {\n      API.search()\n        .then(res =>\n          this.setState({ results: res.data})\n        )\n        .catch(err => console.log(err));\n    };\n\n    searchATXName = query => {\n        API.searchName(query)\n          .then(res =>\n            this.setState({ results: res.data})\n          )\n          .catch(err => console.log(err));\n      };\n\n      searchATXDate = query => {\n        API.searchDate(query)\n          .then(res =>\n            this.setState({ results: res.data})\n          )\n          .catch(err => console.log(err));\n      };\n  \n    handleInputChange = event => {\n        const name = event.target.name;\n        const value = event.target.value;\n        this.setState({\n        [name]: value\n      });\n    };\n  \n    handleFormSubmit = event => {\n      event.preventDefault();\n      console.log(this.state.restaurantName);\n      if(this.state.restaurantName === \"\"){\n        this.searchATXDate(this.state.date);\n    }\n    else {\n        this.searchATXName(this.state.restaurantName);\n    }\n    };\n\n    mapResults = () => {\n        this.state.results.map(food =>(\n            {name: food.restaurant_name}\n            \n        ))\n        \n    }\n\n    responseGoogle = (response) => {\n        console.log();\n        this.setState({user: response.profileObj});\n        API.getUser(response.profileObj.email).then(res => {\n          console.log(JSON.stringify(res));\n          this.setState({user: res.data})\n        }).catch(err =>console.log(err));\n        console.log(this.state.user);\n        if(!this.state.user){\n          console.log(\"user doesn't exits.... creating user\");\n          API.createUser({\n            email: response.profileObj.email,\n            name: response.profileObj.name,\n            imageURL: response.profileObj.imageURL\n          })\n            .then(res => {this.setState({user: res.data})})\n          }\n        \n      }\n\n    // onSignIn = (googleUser) => {\n    //     var profile = googleUser.getBasicProfile();\n    //     console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.\n    //     console.log('Name: ' + profile.getName());\n    //     console.log('Image URL: ' + profile.getImageUrl());\n    //     console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.\n    //   }\n\n    render() {\n      return (\n        <Container fluid>\n        <Nav>&nbsp;</Nav>\n  {this.state.user.email ? (\n  <Row>\n    <Col size=\"md-12\">\n      <Jumbotron>\n        <h1>Welcome {this.state.user.name}</h1>\n        <Button color=\"primary\">Saved Places</Button>\n      </Jumbotron>\n    </Col>\n  </Row>\n  \n\n  ) : (<Row>\n    <Col size=\"md-12\">\n      <Jumbotron>\n        <h1>Please Login...</h1>\n        <GoogleLogin\n    clientId=\"115882627637-6sn830rkgb9mlt6tih8pbapfbmhuggu3.apps.googleusercontent.com\"\n    buttonText=\"Login\"\n    onSuccess={this.responseGoogle}\n    onFailure={this.responseGoogle}\n    cookiePolicy={'single_host_origin'}\n  />\n      </Jumbotron>\n    </Col>\n  </Row>)}\n        </Container>\n      );\n    }\n  }\n  \n  export default User;\n"]},"metadata":{},"sourceType":"module"}